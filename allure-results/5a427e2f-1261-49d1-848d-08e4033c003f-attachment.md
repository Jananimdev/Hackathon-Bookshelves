# Test info

- Name: Bookshelves Functionality
- Location: C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\tests\Bookshelves.spec.js:21:1

# Error details

```
Error: locator.check: Target page, context or browser has been closed
Call log:
  - waiting for locator('#filters_storage_type_Open')
    - locator resolved to <input value="Open" type="checkbox" name="filters[storage_type][]" id="filters_storage_type_Open"/>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is not visible
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is not visible
    - retrying click action
      - waiting 100ms
    39 × waiting for element to be visible, enabled and stable
       - element is not visible
     - retrying click action
       - waiting 500ms

    at Products.clickStorageType (C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\Pages\Products.js:22:23)
    at C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\tests\Bookshelves.spec.js:36:5
    at C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\tests\Bookshelves.spec.js:35:3
```

# Test source

```ts
   1 | const fs = require("fs");
   2 | const path = require("path");
   3 |
   4 | class Products {
   5 |   constructor(page) {
   6 |     this.page = page;
   7 |   }
   8 |
   9 |   async filterPriceRange() {
  10 |     await this.page
  11 |       .locator("li[data-group='price'] div[class='gname']")
  12 |       .hover();
  13 |     await this.page.locator("#price_limit_9000-15999").check();
  14 |     await this.page.waitForSelector(".productlist.withdivider li", { state: 'visible' }); 
  15 |   }
  16 |
  17 |   async clickStorageType() {
  18 |     const storageTypeDropdown = this.page.locator("//li[@data-group='storage type']");
  19 |     const storageType = this.page.locator("#filters_storage_type_Open");
  20 |     await storageTypeDropdown.hover();
  21 |     await storageType.waitFor({ state: 'visible' });
> 22 |     await storageType.check();
     |                       ^ Error: locator.check: Target page, context or browser has been closed
  23 |     await this.page.waitForSelector(".productlist.withdivider li", { state: 'visible' }); 
  24 |   }
  25 |
  26 |   async clickOutOfStock() {
  27 |     const outOfStock = this.page.locator("#filters_availability_In_Stock_Only");
  28 |     await outOfStock.check();
  29 |     await this.page.waitForSelector(".productlist.withdivider li", { state: 'visible' }); 
  30 |   }
  31 |
  32 |   async closePopup() {
  33 |     const popup = this.page.locator("#authentication_popup");
  34 |     const closepopup = this.page.locator("//a[normalize-space()='Close']");
  35 |     await popup.waitFor({ state: 'visible' }); 
  36 |     await closepopup.click();
  37 |     await popup.waitFor({ state: 'hidden' }); 
  38 |   }
  39 |
  40 |   async clickProduct() {
  41 |     const product = this.page.locator('//li[@class="product  hovercard"][1]');
  42 |     await product.click();
  43 |     const newPagePromise = this.page.waitForEvent("popup");
  44 |     const newPage = await newPagePromise;
  45 |     await newPage.waitForLoadState('domcontentloaded'); 
  46 |     return newPage;
  47 |   }
  48 |
  49 |   async getProducts() {
  50 |     await this.page.locator(".productlist.withdivider li").first().waitFor({ state: 'visible' });
  51 |
  52 |     const productCount = 3;
  53 |     let result = [];
  54 |     for (let i = 0; i < productCount; i++) {
  55 |       const productTitle = this.page.locator(".product-info-block .product-title .name");
  56 |       const productPrice = this.page.locator(".price-number span");
  57 |
  58 |       await productTitle.nth(i).waitFor({ state: 'visible' });
  59 |       await productPrice.nth(i).waitFor({ state: 'visible' });
  60 |
  61 |       const title = await productTitle.nth(i).textContent();
  62 |       const price = await productPrice.nth(i).textContent();
  63 |       result.push({ title, price });
  64 |     }
  65 |     let outputJson = {
  66 |       products_length: result.length,
  67 |       products: result,
  68 |     };
  69 |     const outputPath = path.join(__dirname,"..","data","bookShelvesOutput.json");
  70 |     fs.writeFileSync(outputPath, JSON.stringify(outputJson, null, 2));
  71 |   }
  72 | }
  73 |
  74 | module.exports = Products;
```