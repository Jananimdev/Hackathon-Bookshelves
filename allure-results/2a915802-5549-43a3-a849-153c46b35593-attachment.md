# Test info

- Name: Bookshelves Functionality
- Location: C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\tests\Bookshelves.spec.js:21:1

# Error details

```
Error: locator.check: Target page, context or browser has been closed
Call log:
  - waiting for locator('#filters_storage_type_Open')
    - locator resolved to <input value="Open" type="checkbox" name="filters[storage_type][]" id="filters_storage_type_Open"/>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is not visible
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is not visible
    - retrying click action
      - waiting 100ms
    35 × waiting for element to be visible, enabled and stable
       - element is not visible
     - retrying click action
       - waiting 500ms

    at Products.clickStorageType (C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\Pages\Products.js:21:23)
    at C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\tests\Bookshelves.spec.js:36:5
    at C:\Users\2397855\OneDrive - Cognizant\Documents\New folder\Hackathon-Bookshelves\tests\Bookshelves.spec.js:35:3
```

# Test source

```ts
   1 | const fs = require("fs");
   2 | const path = require("path");
   3 |
   4 | class Products {
   5 |   constructor(page) {
   6 |     this.page = page;
   7 |   }
   8 |
   9 |   async filterPriceRange() {
  10 |     await this.page
  11 |       .locator("li[data-group='price'] div[class='gname']")
  12 |       .hover();
  13 |     await this.page.locator("#price_limit_9000-15999").check();
  14 |     await this.page.waitForSelector(".productlist.withdivider li", { state: 'visible' }); 
  15 |   }
  16 |
  17 |   async clickStorageType() {
  18 |     const storageTypeDropdown = this.page.locator("//li[@data-group='storage type']");
  19 |     const storageType = this.page.locator("#filters_storage_type_Open");
  20 |     await storageTypeDropdown.hover();
> 21 |     await storageType.check();
     |                       ^ Error: locator.check: Target page, context or browser has been closed
  22 |     await this.page.waitForSelector(".productlist.withdivider li", { state: 'visible' }); 
  23 |   }
  24 |
  25 |   async clickOutOfStock() {
  26 |     const outOfStock = this.page.locator("#filters_availability_In_Stock_Only");
  27 |     await outOfStock.check();
  28 |     await this.page.waitForSelector(".productlist.withdivider li", { state: 'visible' }); 
  29 |   }
  30 |
  31 |   async closePopup() {
  32 |     const popup = this.page.locator("#authentication_popup");
  33 |     const closepopup = this.page.locator("//a[normalize-space()='Close']");
  34 |     await popup.waitFor({ state: 'visible' }); 
  35 |     await closepopup.click();
  36 |     await popup.waitFor({ state: 'hidden' }); 
  37 |   }
  38 |
  39 |   async clickProduct() {
  40 |     const product = this.page.locator('//li[@class="product  hovercard"][1]');
  41 |     await product.click();
  42 |     const newPagePromise = this.page.waitForEvent("popup");
  43 |     const newPage = await newPagePromise;
  44 |     await newPage.waitForLoadState('domcontentloaded'); 
  45 |     return newPage;
  46 |   }
  47 |
  48 |   async getProducts() {
  49 |     await this.page.locator(".productlist.withdivider li").first().waitFor({ state: 'visible' });
  50 |
  51 |     const productCount = 3;
  52 |     let result = [];
  53 |     for (let i = 0; i < productCount; i++) {
  54 |       const productTitle = this.page.locator(".product-info-block .product-title .name");
  55 |       const productPrice = this.page.locator(".price-number span");
  56 |
  57 |       await productTitle.nth(i).waitFor({ state: 'visible' });
  58 |       await productPrice.nth(i).waitFor({ state: 'visible' });
  59 |
  60 |       const title = await productTitle.nth(i).textContent();
  61 |       const price = await productPrice.nth(i).textContent();
  62 |       result.push({ title, price });
  63 |     }
  64 |     let outputJson = {
  65 |       products_length: result.length,
  66 |       products: result,
  67 |     };
  68 |     const outputPath = path.join(__dirname,"..","data","bookShelvesOutput.json");
  69 |     fs.writeFileSync(outputPath, JSON.stringify(outputJson, null, 2));
  70 |   }
  71 | }
  72 |
  73 | module.exports = Products;
```